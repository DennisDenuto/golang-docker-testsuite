{"name":"Golang-docker-testsuite","tagline":"golang integration tests with docker","body":"# gotestwithdocker\r\n[![Build Status](https://travis-ci.org/DennisDenuto/golang-docker-testsuite.svg?branch=master)](https://travis-ci.org/DennisDenuto/golang-docker-testsuite)\r\n\r\nA testing library (for golang projects) to assist in writing integration tests with docker!.\r\n\r\nYou specify the docker container you want running for your integration tests.\r\n\r\nThe library will spin it up for your tests to use and tear it down at the end.\r\n\r\n## Usage\r\n\r\nInside your test file:\r\n```go\r\nimport \"github.com/DennisDenuto/golang-docker-testsuite\"\r\nimport . \"gopkg.in/check.v1\"\r\n\r\n\r\nfunc Test(t *testing.T) { TestingT(t) }\r\n\r\ntype LocalDockerSuite struct {\r\n\tgotestwithdocker.DockerSuite\r\n}\r\n\r\nvar _ = Suite(&LocalDockerSuite{gotestwithdocker.DockerSuite{ConfigYaml: \"./docker-config.yaml\"}})\r\n\r\nfunc (s *LocalDockerSuite) TestHappyCase(c *C) {\r\n\t// your test code here: \r\n\t// host ip of your test container: os.Getenv(\"DOCKER_HOST_IP\")\r\n\t// host port of exposed container port: os.Getenv(\"DOCKER_PORTS_8080/tcp\")\r\n}\r\n```\r\nminimalistic docker-config.yaml\r\n```yaml\r\ncontainer_name: some-name\r\nimage: a-docker-image\r\n```\r\ndocker-config.yaml with exposed ports:\r\n```yaml\r\nports:\r\n\t- 8080:8080\r\n```\r\ndocker-config.yaml wait for container to start up from grepping log message\r\n```yaml\r\nwait:\r\n\tlog: Some msg from StdOut you should wait for before running tests\r\n```\r\ndocker-config.yaml build a docker image from a DockerFile\r\n```yaml\r\ncontainer_name: test-container-name\r\nimage: image-name-to-use-for-built-docker-image\r\nbuild:\r\n        dockerfile_dir: ./directory-containing-dockerfile\r\n\r\n```\r\n\r\n## Contributing\r\n\r\n1. Fork it!\r\n2. Create your feature branch: `git checkout -b my-new-feature`\r\n3. Commit your changes: `git commit -am 'Add some feature'`\r\n4. Push to the branch: `git push origin my-new-feature`\r\n5. Submit a pull request :D\r\n\r\n","google":"UA-68893006-1","note":"Don't delete this file! It's used internally to help with page regeneration."}